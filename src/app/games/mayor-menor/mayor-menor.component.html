<div class="component">

  <!-- PANTALLA DE INICIO -->
  @if (gameState === 'inicio') {
    <div class="game-overlay">
      <h1 class="titulo-juego">ğŸƒ Mayor o Menor</h1>
      
      <p class="estado-mensaje" 
         [class.puede-ganar]="puedeJugarPorDescuento"
         [class.sin-descuento]="!puedeJugarPorDescuento">
        {{ getMensajeInicio() }}
      </p>
      
      <p class="instrucciones">AdivinÃ¡ si la prÃ³xima carta serÃ¡ mayor o menor. Â¡NecesitÃ¡s {{ puntosParaGanar }} aciertos seguidos!</p>
      
      <ion-button expand="block" [color]="puedeJugarPorDescuento ? 'success' : 'primary'" (click)="iniciarJuego()">
        <ion-icon name="game-controller-outline" slot="start"></ion-icon>
        {{ puedeJugarPorDescuento ? 'Comenzar (Intento por Descuento)' : 'Jugar' }}
      </ion-button>
      
      <ion-button expand="block" fill="outline" color="medium" (click)="volverAlMenu()">
        <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
        Volver
      </ion-button>
    </div>
  }

  <!-- PANTALLA DE JUEGO -->
  @if (gameState === 'jugando') {
    <div class="puntos">
      ACIERTOS: <span class="puntos-valor">{{ puntos }}/{{ puntosParaGanar }}</span>
      <img src="https://jpwlvaprtxszeimmimlq.supabase.co/storage/v1/object/public/FritosHermanos/crispy2.png" alt="pollo">
    </div>
    
    <div class="card" [class.flip]="isFlipping">
      <p class="num-esquina">{{ carta }}</p>
      <p class="num-principal">{{ carta }}</p>
      <p class="num-esquina">{{ carta }}</p>
    </div>
    
    <p class="mensaje">LA SIGUIENTE CARTA ES:</p>
    
    <div class="container-options">
      <div class="option menor" (click)="mayorMenor('menor')">
        <ion-icon name="arrow-down-outline"></ion-icon>
        MENOR
      </div>
      <div class="option mayor" (click)="mayorMenor('mayor')">
        <ion-icon name="arrow-up-outline"></ion-icon>
        MAYOR
      </div>
    </div>
  }

  <!-- PANTALLA DE RESULTADO -->
  @if (gameState === 'terminado') {
    <div class="game-overlay resultado">
      <h1 class="titulo-juego">
        {{ gano ? 'ğŸ‰ Â¡GANASTE!' : 'ğŸ’” Game Over' }}
      </h1>
      
      <div class="score-card">
        <p class="puntos-finales">Aciertos: {{ puntos }}</p>
        
        @if (gano && puedeJugarPorDescuento === false && !yaUsoIntento) {
          <p class="descuento-ganado">ğŸ‰ +{{ descuentoJuego }}% de descuento</p>
        }
      </div>
      
      <div class="mensaje-resultado">
        <p>{{ mensajeResultado }}</p>
      </div>

      <ion-button expand="block" color="secondary" (click)="reiniciarJuego()">
        <ion-icon name="refresh-outline" slot="start"></ion-icon>
        Jugar de Nuevo
      </ion-button>
      
      <ion-button expand="block" fill="outline" color="medium" (click)="volverAlMenu()">
        <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
        Volver al MenÃº de Juegos
      </ion-button>
    </div>
  }

</div>
